<html lang="en">
<head>
  <title>Search - Lucem</title>
  <link href='https://fonts.googleapis.com/css?family=Raleway:500,700' rel='stylesheet' type='text/css'>
  <style>
   html, body, input[type="text"], button[type=submit] {
     font-family: 'Raleway', sans-serif;
   }
   body {
     margin:0;
     padding:0;
   }
   #global-container {
   }
   #img-container {
     height:50%;
     background-image:url("http://i.imgur.com/m43WQk0.jpg");
     background-size:100% auto;
     background-repeat:no-repeat;
   }
   #logo-container {
     margin:0 auto;
     width:375px;
     border: 0.65em solid white;
     text-align:center;
     /* center div vertically */
     position:relative;
     top:50%;
     transform:translateY(-50%);
     text-align: center;
   }
   #logo-container h1 {
     font-size:3.5em;
     letter-spacing:0.25em;
     /* offsets the letter spacing on the final letter*/
     padding-left:0.25em;
     color:white;
   }
   #form-container {
     width:600px;
     margin:2.5% auto;
     text-align:center;
   }
   #search input[type=text] {
     font-size:1.25em;
     padding:5px 7px;
     width:65%;
   }
   #search button[type=submit] {
     vertical-align:top;
     margin:1px 0 0 3px;
     height:3em;
     background-color:lightgrey;
     border:none;
     color:white;
     cursor:initial;
     font-size:.75em;
     font-weight:700;
     letter-spacing:0.5px;
     padding:0 12px;
   }
   #search button[type=submit]:hover {
     cursor:pointer;
     background-color:grey;
   }
   #nav-container {
     position:absolute;
     top:0;
     left:0;
     width:100%;
     padding:.75em 0;
     text-align:right;
     background-color: rgba(0,0,0,0.6);
   }
   #nav-container a {
     margin:0 .5em 0 0 ;
     font-weight:700;
     color:white;
     text-decoration:none;
   }
   .uppercase {
     text-transform:uppercase;
   }
   #nav-container a {
    font-size:0.9em;
   }
   #modal-background {
        position:fixed;
        top:0;
        left:0;
        background-color:rgba(0, 0, 0, 0.6);
        width:100%;
        height:100vh;
        z-index:1;
      }
      #modal-container {
        background-color:white;
        width:90%;
        margin:0 auto;
        height:90vh;
        overflow:auto;
        position:relative;
        top:50%;
        transform:translateY(-50%);
        z-index:2;
      }

  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <script>
  	$(document).ready(function(){
                        $("#search").submit(function(e){
                                var url = "http://52.36.127.109:9000/search"
                                //var url = "/search";
                                e.preventDefault();
                                // serialize function uses the name attribute associated with
                                // the input[type=text]
                                console.log($(this).attr("query"));
                                console.log($(this).serialize());
                                $.post(url, $(this).serialize())
                                 .done(function(data){
  var json = JSON.parse(data);
  console.log(json);
  if(json.documents == null) {
    console.log("error");
    return;
  }
 	
					var modalBackground = "<div id=\"modal-background\"></div>";
          				var containerHTML = "<div id=\"modal-container\"></div>";
         				$("body").prepend(modalBackground);
          				$("#modal-background").append(containerHTML);
          				$("#modal-background").click(function() {
            					if($(event.target).is("#modal-background")) {
             						 $("#modal-background").remove();
            					}
        	 			 });
         					
					var i =0;
					while(i < json.documents.length){
                                                $("#modal-container").append("<br>");
											
						$("#modal-container").append("<div id=" + divId + " class='collapse'> </div>");
                                                $("#"+divId).append(json.documents[i].html);
						
						var caseTitle = $("#"+divId).find(".parties").text();
						caseTitle.replace(/<(?:.|\n)*?>/gm, ' ');
						var actualResultNumber = i + 1;
						var divId = "result" + i;
		var buttonHTML =  "<button type='button' class='btn btn-info' data-toggle='collapse'"+ "data-target='#"+divId+"'>"+ caseTitle + " </button>"; 	
						
						$("#modal-container").append(buttonHTML);

						i++;
					}
					
				});
                        });
         });
  </script>
</head>
<body>
  <div id="global-container">
    <div id="nav-container">
      <a class="uppercase" href="">Home</a>
      <a class="uppercase" href="">Logout</a>
    </div>
    <div id="img-container">
      <div id="logo-container">
        <h1 class="uppercase">Lucem</h1>
      </div>
    </div>
  </div>
  <div id="form-container">
    <form id="search">
     <input type="text" id="query" name="query">
     </input>
     <button class="uppercase" type="submit" value="Search">
       Search
     </button>
    </form>
  </div>
</body>
</html>
